<div class="container">
  <h1><%= @offer.title %></h1>
  <br>

  <% if @offer.status == "requested" %>
    <%= render "details_offer_request" %>
  <% else %>
    <%= render "confirmed_offer" %>
  <% end %>

  <div class="row">
    <div class="col-12 col-md-6">
      <div>
        <% @offer.offer_lines.each do |offer_line| %>
          <ul class="product-list">
            <li>Product: <b><%= offer_line.product.name %></b></li>
            <li>Brand: <b><%= offer_line.product.brand %></b></li>
            <li>SKU: <b><%= offer_line.product.nr_per_sku %> * <%= offer_line.product.weight_in_kg %> kg</b></li>
            <li>Description: <b><%= offer_line.product.description %></b></li>
            <li>Quantity: <b><%= offer_line.quantity_in_tons %> tons</b></li>
            <% if @offer.status != "requested" %>
              <li>Price: <b>â‚¬<%= offer_line.price %></b></li>
            <% end %>
          </ul>
        <% end %>
      </div>
    </div>
  </div>
  <div class="row">
    <% if @offer.status == "sent" %>
      <%= link_to "Send counter offer", offer_path(@offer), class: "btn btn-primary" %><!-- create a new counter offer with NEW@offer = THIS@offer.dup and NEWfollow_up_on_offer_id = THIS@offer.id -->


      <%= link_to "Accept", offer_path(@offer, offer: {status: "accepted"}), method: :put, class: "btn btn-primary" %><!-- @offer.update(status:"accepted") -->
      <!-- how to redirect to another page after pushing button and status change? -->

      <%= link_to "Decline", offer_path(@offer, offer: {status: "declined"}), method: :put, class: "btn btn-primary" %><!-- @offer.update(status:"declined") -->
      <!-- how to redirect to user_path(current_user) after pushing button and status change? -->
    <% end %>
    <% if current_user.seller && @offer.status == "accepted" %>
      <%= link_to "Confirm", offer_path(@offer, offer: {status: "confirmed"}), method: :put, class: "btn btn-primary" %><!-- @offer.update(status:"confirmed") -->
      <!-- how to redirect to contract page after pushing button and status change? -->

      <%= link_to "Decline", offer_path(@offer, offer: {status: "declined"}), method: :put, class: "btn btn-primary" %><!-- @offer.update(status:"declined") -->
      <!-- how to redirect to user_path(current_user) after pushing button and status change? -->
    <% end %>
  </div>
</div>

